{{- if .Values.postgres.enabled }}
apiVersion: v1
kind: Secret
metadata:
  name: {{- if .Values.database.secretName }}{{ .Values.database.secretName }}{{- else }}{{ include "geargo.fullname" . }}-postgres-secret{{- end }}
  labels:
    {{- include "geargo.labels" . | nindent 4 }}
type: Opaque
stringData:
  username: "{{ .Values.postgres.username }}"
  password: "{{ .Values.postgres.password }}"
  database: "{{ .Values.postgres.database }}"
  database-url: "postgres://{{ .Values.postgres.username }}:{{ .Values.postgres.password }}@{{ include "geargo.fullname" . }}-postgres:{{ .Values.postgres.port }}/{{ .Values.postgres.database }}"
{{- end }}
